/*!
 * jQuery WebRating - v1.0.00
 *
 * Copyright 2014, Piyush Ramuka
 *
 * Dual licensed under the MIT and GPL v2 licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 *
 * jQuery("div").starRating();
 */
;(function(e,t,n,r){e.fn.starRating=function(r){function l(){if(!!i.imgSrc==false)return;if(i.starCount==0)return;if(!!i.onClassHover==false){i.onClassHover=i.onClass}if(!!i.offClassHover==false){i.offClassHover=i.offClass}s=e(s).filter(function(){var t=e(this);return!t.data("loaded")&&t.attr(i.score)});var t=e(new Image);t.attr("src",i.imgSrc);var r=0;s.each(function(){var s=e(this);s.data("loaded",true);var a=+s.attr(i.score);var f=+s.attr(i.count);var l=s.attr(i.attribute);var c=n.createElement("div");c.id="bgDiv";c.style.width=i.width*i.starCount+u;c.style.height=i.height+u;if(i.autoParentWidth){this.style.width=c.style.width}if(i.tp_showAverage){var g=i.prefixAverage+a.toFixed(2);if(f&&f>0)g+=" ("+f+")";c.title=g}e(c).data("clickCount",0);e(c).data("score",a);e(c).data("count",f);e(c).data("argCallback",l);e(c).data("cookieIndex",r++);var y=n.createElement("div");y.id="onDiv";y.setAttribute("class",i.onClass);c.appendChild(y);y.style.width=h(a);y.style.height=i.height+u;y.style.cssFloat="left";var b=n.createElement("div");b.id="offDiv";b.setAttribute("class",i.offClass);c.appendChild(b);b.style.width=p(a);b.style.height=i.height+u;b.style.cssFloat="left";var w=n.createElement("div");w.id="starParent";w.setAttribute("style","position: absolute;");c.appendChild(y);c.appendChild(b);c.appendChild(w);s.append(c);for(var E=0;E<i.starCount;E++){var S=n.createElement("div");S.id=E+1;S.style.width=i.width+u;S.style.height=i.height+u;S.style.cssFloat="left";if(i.tp_eachStar){if(i.tp_eachStar[E+1]){S.title=i.tp_eachStar[E+1]}}var x=n.createElement("img");x.setAttribute("src",t.attr("src"));x.style.marginLeft=o+i.xLocation+u;x.style.marginTop=o+i.yLocation+u;x.style.clip="rect("+i.yLocation+"px,"+(+i.xLocation+ +i.width)+"px,"+(+i.yLocation+ +i.height)+"px,"+i.xLocation+"px)";x.style.position="absolute";x.style.maxWidth="none";S.appendChild(x);w.appendChild(S)}if(d(e(c))<1){v(e(w));return}e(w).on({mouseover:function(){if(d(e(c))<1){v(e(w));return}var t=e(this).attr("id");y.style.width=h(t);b.style.width=p(t)},click:function(){var t=e(this);var n=e(w);var r=e(c);if(d(r)<1){v(n);return}m(r,1);var s=+t.attr("id");if(i.updateScore){var o=+r.data("score");var u=+r.data("count");o=(o*u+s)/(u+1),2;u++;r.data("score",o);r.data("count",u);if(i.tp_showAverage){var a=i.prefixAverage+o.toFixed(2);if(u&&u>0)a+=" ("+u+")";r.attr("title",a)}y.style.width=h(o);b.style.width=p(o)}r.css("cursor","default");y.className=i.onClass;b.className=i.offClass;var f=r.data("argCallback");i.starClick&&i.starClick(s,f)}},"div");e(c).on({mouseenter:function(){var t=e(this);var n=t.children().get(0);var r=t.children().get(1);var s=e(t.children().get(2));if(d(t)<1){v(s);return}n.className=i.onClassHover;r.className=i.offClassHover;t.css("cursor","pointer")},mouseleave:function(){var t=e(this);var n=t.children().get(0);var r=t.children().get(1);t.css("cursor","default");n.className=i.onClass;r.className=i.offClass;var s=t.data("score");n.style.width=h(s);r.style.width=p(s)}})})}function c(){l()}function h(e){return e/i.starCount*100+a}function p(e){return(i.starCount-e)/i.starCount*100+a}function d(e){var t=+e.data("clickCount");if(i.cookieEnable){var n=+y(i.cookiePrefix+e.data("cookieIndex"));if(!!n==false){n=0}t=n>t?n:t}return i.maxClick-t}function v(t){var n=t.children();var r=n.size();for(var i=0;i<r;i++){e(n.get(i)).removeAttr("title")}}function m(t,n){var r=+t.data("clickCount");if(i.cookieEnable){var s=+y(i.cookiePrefix+t.data("cookieIndex"));if(!!s==false){s=0}r=s>r?s:r}e(t).data("clickCount",r+n);if(i.cookieEnable){b(i.cookiePrefix+t.data("cookieIndex"));g(i.cookiePrefix+t.data("cookieIndex"),r+n,i.cookieLifeDays)}}function g(e,t,r){if(r){var i=new Date;i.setTime(i.getTime()+r*24*60*60*1e3);var s="; expires="+i.toGMTString()}else var s="";n.cookie=e+"="+t+s+"; path=/"}function y(e){var t=e+"=";var r=n.cookie.split(";");for(var i=0;i<r.length;i++){var s=r[i];while(s.charAt(0)==" ")s=s.substring(1,s.length);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return null}function b(e){g(e,"",-1)}var i={bind:"load",starCount:5,imgSrc:null,xLocation:0,yLocation:0,width:30,height:30,onClass:"starOn",offClass:"starOff",onClassHover:null,offClassHover:null,autoParentWidth:true,cookieEnable:true,cookieLifeDays:1,cookiePrefix:"starRating_",tp_showAverage:true,prefixAverage:"Avg",tp_eachStar:null,updateScore:true,maxClick:1,starClick:null,attribute:"data-starRatingArg",score:"data-ratingStar",count:"data-countStar"};if(r)e.extend(i,r);var s=this;var o="-";var u="px";var a="%";var f=i.prefixAverage.trim();if(f.length>0){i.prefixAverage=i.prefixAverage.trim()+" "}else{i.prefixAverage=""}if(i.bind=="load")e(t).load(c);else if(i.bind=="event")c();return this};e.fn.StarRating=e.fn.starRating})(jQuery,window,document)